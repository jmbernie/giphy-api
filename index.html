<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>The Magical Animals Button</title>
</head>


<body>
<!--   load paused gif
        unpause gif
        redraw buttons when adding a new one

  -->

  <div id="animal-buttons"></div>
<!--   <button id="cat-button">magical cat button</button>  -->

  <form>
    <span id="add-animal-button">Add button: <input id="new-animal-button" type="text" ><input id="add-to-animal-button" value="Add Item" type="submit"></span>
  </form>
  <div id="images"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">
  var buttonArray = ["cat","dog","skunk","dolphin","shark",];

    $("#add-to-animal-button").on("click", function() {
      event.preventDefault();      
      // alert($(this).attr("new-animal-button"));
      var name = $("#new-animal-button").val().trim();
      alert("you typed " + name);
      buttonArray.push(name);
      // redraw buttons
      drawButtons();
      console.log(buttonArray);


    });//closing on "click"
//drawButtons($(this));
drawButtons();

function drawButtons(){  
  $("#animal-buttons").empty();

  for(var i=0; i<buttonArray.length;i++){
      var buttonList = $("<button>");
      buttonList.text(buttonArray[i]);
      buttonList.attr("giphy-to-search", buttonArray[i]);
      // Add the button and to do item to the to-dos div
      $("#animal-buttons").append(buttonList);
      //add functionality to buttons
        buttonList.on("click", function() {
          //alert("This animal is " + $(this).attr("giphy-to-search"));
          var animalName = $(this).attr("giphy-to-search");
          //var animalName = object.attr("giphy-to-search");
          var queryURL = "https://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC&tag=" + animalName;
            console.log(queryURL);
        // Perfoming an AJAX GET request to our queryURL
        $.ajax({
          url: queryURL,
          method: "GET"
            }).done(function(response) {
              // Saving the image_original_url property
              var imageUrl = response.data.image_original_url;
              // Creating and storing an image tag
              var animalImage = $("<img>");
              // Setting the animalImage src attribute to imageUrl
              animalImage.attr("src", imageUrl);
              animalImage.attr("alt", animalName + " image");
              // Prepending the animalImage to the images div
              $("#images").prepend(animalImage);
            }); // .done function
        }); // .on "click" closing tag      
  } // for loop closer
} // function drawButtons()




  </script>
</body>

</html>